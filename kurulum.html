<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKA Yazılım Lisans Sistemi - Kurulum Rehberi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .kurulum-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            overflow: hidden;
        }
        .kurulum-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .kurulum-body {
            padding: 40px;
        }
        .adim {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .adim h4 {
            color: #007bff;
            margin-bottom: 15px;
        }
        .uyari {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            color: #856404;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .basarili {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .hata {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .kod-blok {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        .nav-pills .nav-link {
            border-radius: 25px;
            margin: 0 5px;
            transition: all 0.3s ease;
        }
        .nav-pills .nav-link.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .toc {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc ul li {
            padding: 5px 0;
        }
        .toc ul li a {
            text-decoration: none;
            color: #1976d2;
            transition: all 0.3s ease;
        }
        .toc ul li a:hover {
            color: #0d47a1;
            padding-left: 10px;
        }
        .hosting-panel {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        .hosting-panel:hover {
            border-color: #007bff;
            box-shadow: 0 5px 15px rgba(0,123,255,0.1);
        }
        .sistem-gereksinim {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="kurulum-card">
            <div class="kurulum-header">
                <h1><i class="fas fa-cogs me-3"></i>EKA Yazılım Lisans Sistemi</h1>
                <p class="mb-0">Kapsamlı Kurulum Rehberi</p>
            </div>
            
            <div class="kurulum-body">
                <div class="toc">
                    <h3><i class="fas fa-list me-2"></i>İçindekiler</h3>
                    <ul>
                        <li><a href="#sistem-gereksinimleri">1. Sistem Gereksinimleri</a></li>
                        <li><a href="#dosya-yapisi">2. Dosya Yapısı</a></li>
                        <li><a href="#yerel-kurulum">3. Yerel Kurulum (XAMPP/WAMP)</a></li>
                        <li><a href="#cpanel-kurulum">4. cPanel Kurulumu</a></li>
                        <li><a href="#plesk-kurulum">5. Plesk Kurulumu</a></li>
                        <li><a href="#directadmin-kurulum">6. DirectAdmin Kurulumu</a></li>
                        <li><a href="#veritabani-kurulum">7. Veritabanı Kurulumu</a></li>
                        <li><a href="#ssl-kurulum">8. SSL Sertifikası</a></li>
                        <li><a href="#guvenlik-ayarlari">9. Güvenlik Ayarları</a></li>
                        <li><a href="#sorun-giderme">10. Sorun Giderme</a></li>
                    </ul>
                </div>

                <section id="sistem-gereksinimleri">
                    <div class="adim">
                        <h3><i class="fas fa-server me-2"></i>1. Sistem Gereksinimleri</h3>
                        
                        <div class="sistem-gereksinim">
                            <h5><i class="fas fa-check-circle text-success me-2"></i>Minimum Gereksinimler</h5>
                            <ul>
                                <li><strong>PHP:</strong> 7.4 veya üzeri (Önerilen: PHP 8.0+)</li>
                                <li><strong>MySQL:</strong> 5.7 veya üzeri (Önerilen: MySQL 8.0+)</li>
                                <li><strong>Web Sunucusu:</strong> Apache 2.4+ veya Nginx 1.18+</li>
                                <li><strong>Disk Alanı:</strong> Minimum 50 MB</li>
                                <li><strong>RAM:</strong> Minimum 512 MB</li>
                            </ul>
                        </div>
                        
                        <div class="sistem-gereksinim">
                            <h5><i class="fas fa-puzzle-piece text-primary me-2"></i>Gerekli PHP Eklentileri</h5>
                            <ul>
                                <li>PDO (PHP Data Objects)</li>
                                <li>PDO_MySQL</li>
                                <li>JSON</li>
                                <li>OpenSSL</li>
                                <li>cURL</li>
                                <li>mbstring</li>
                                <li>fileinfo</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="dosya-yapisi">
                    <div class="adim">
                        <h3><i class="fas fa-folder-tree me-2"></i>2. Dosya Yapısı</h3>
                        
                        <div class="kod-blok">
eka-lisans-sistemi/
├── api/
│   └── lisans-dogrula.php          # API endpoint
├── assets/
│   ├── css/
│   │   └── style.css               # Stil dosyası
│   └── js/
│       └── main.js                 # JavaScript dosyası
├── classes/
│   ├── EkaKullaniciYoneticisi.php  # Kullanıcı yönetimi
│   ├── EkaLisansYoneticisi.php     # Lisans yönetimi
│   └── EkaUrunYoneticisi.php       # Ürün yönetimi
├── config/
│   └── veritabani.php              # Veritabanı ayarları
├── panel/
│   ├── includes/
│   │   ├── header.php              # Sayfa başlığı
│   │   ├── sidebar.php             # Yan menü
│   │   └── footer.php              # Sayfa altı
│   ├── dashboard.php               # Ana panel
│   ├── lisanslar.php               # Lisans listesi
│   ├── urunler.php                 # Ürün listesi
│   └── ...                         # Diğer panel sayfaları
├── index.php                       # Giriş sayfası
├── kayit.php                       # Kayıt sayfası
├── kurulum.php                     # Otomatik kurulum
└── README.md                       # Dokümantasyon
                        </div>
                    </div>
                </section>

                <section id="yerel-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-desktop me-2"></i>3. Yerel Kurulum (XAMPP/WAMP)</h3>
                        
                        <h5>XAMPP Kurulumu:</h5>
                        <ol>
                            <li>XAMPP'ı indirin ve kurun: <a href="https://www.apachefriends.org/" target="_blank">https://www.apachefriends.org/</a></li>
                            <li>Apache ve MySQL servislerini başlatın</li>
                            <li>Dosyaları <code>C:\xampp\htdocs\</code> klasörüne kopyalayın</li>
                            <li>Tarayıcıda <code>http://localhost/kurulum.php</code> adresine gidin</li>
                            <li>Kurulum sihirbazını takip edin</li>
                        </ol>
                        
                        <div class="uyari">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Not:</strong> XAMPP varsayılan olarak MySQL root kullanıcısı için şifre gerektirmez.
                        </div>
                    </div>
                </section>

                <section id="cpanel-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-server me-2"></i>4. cPanel Kurulumu</h3>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-upload me-2"></i>Dosya Yükleme</h5>
                            <ol>
                                <li>cPanel'e giriş yapın</li>
                                <li><strong>File Manager</strong> (Dosya Yöneticisi) açın</li>
                                <li><code>public_html</code> klasörüne gidin</li>
                                <li>Tüm dosyaları ZIP olarak yükleyin</li>
                                <li>ZIP dosyasını <strong>Extract</strong> (Çıkart) ile açın</li>
                            </ol>
                        </div>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-database me-2"></i>Veritabanı Oluşturma</h5>
                            <ol>
                                <li><strong>MySQL Databases</strong> bölümüne gidin</li>
                                <li>Yeni veritabanı oluşturun: <code>kullanici_eka_lisans</code></li>
                                <li>Yeni MySQL kullanıcısı oluşturun</li>
                                <li>Kullanıcıyı veritabanına ekleyin (Tüm yetkiler)</li>
                                <li><code>config/veritabani.php</code> dosyasını düzenleyin:</li>
                            </ol>
                            
                            <div class="kod-blok">
private static $sunucu = 'localhost';
private static $kullanici = 'kullanici_dbuser';
private static $sifre = 'guvenli_sifre';
private static $veritabani = 'kullanici_eka_lisans';
                            </div>
                        </div>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-cog me-2"></i>PHP Ayarları</h5>
                            <ol>
                                <li><strong>Select PHP Version</strong> bölümüne gidin</li>
                                <li>PHP 7.4 veya üzeri seçin</li>
                                <li>Gerekli eklentileri aktifleştirin:
                                    <ul>
                                        <li>pdo</li>
                                        <li>pdo_mysql</li>
                                        <li>json</li>
                                        <li>openssl</li>
                                        <li>curl</li>
                                        <li>mbstring</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>
                </section>

                <section id="plesk-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-server me-2"></i>5. Plesk Kurulumu</h3>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-upload me-2"></i>Dosya Yükleme</h5>
                            <ol>
                                <li>Plesk paneline giriş yapın</li>
                                <li><strong>Files</strong> (Dosyalar) bölümüne gidin</li>
                                <li><code>httpdocs</code> klasörüne gidin</li>
                                <li>Dosyaları sürükle-bırak ile yükleyin</li>
                                <li>ZIP dosyasını sağ tıklayıp <strong>Extract</strong> seçin</li>
                            </ol>
                        </div>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-database me-2"></i>Veritabanı Oluşturma</h5>
                            <ol>
                                <li><strong>Databases</strong> (Veritabanları) bölümüne gidin</li>
                                <li><strong>Add Database</strong> tıklayın</li>
                                <li>Veritabanı adı: <code>eka_lisans_sistemi</code></li>
                                <li>Kullanıcı adı ve şifre belirleyin</li>
                                <li>Veritabanı ayarlarını <code>config/veritabani.php</code> dosyasına girin</li>
                            </ol>
                        </div>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-cog me-2"></i>PHP Ayarları</h5>
                            <ol>
                                <li><strong>PHP Settings</strong> bölümüne gidin</li>
                                <li>PHP versiyonunu 7.4+ olarak ayarlayın</li>
                                <li>Gerekli eklentileri kontrol edin</li>
                                <li><code>memory_limit</code> en az 128M olarak ayarlayın</li>
                            </ol>
                        </div>
                    </div>
                </section>

                <section id="directadmin-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-server me-2"></i>6. DirectAdmin Kurulumu</h3>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-upload me-2"></i>Dosya Yükleme</h5>
                            <ol>
                                <li>DirectAdmin paneline giriş yapın</li>
                                <li><strong>File Manager</strong> tıklayın</li>
                                <li><code>public_html</code> klasörüne gidin</li>
                                <li><strong>Upload Files</strong> ile dosyaları yükleyin</li>
                                <li>ZIP dosyasını seçip <strong>Extract</strong> tıklayın</li>
                            </ol>
                        </div>
                        
                        <div class="hosting-panel">
                            <h5><i class="fas fa-database me-2"></i>Veritabanı Oluşturma</h5>
                            <ol>
                                <li><strong>MySQL Management</strong> bölümüne gidin</li>
                                <li><strong>Create new Database</strong> tıklayın</li>
                                <li>Database Name: <code>eka_lisans</code></li>
                                <li>Database User oluşturun</li>
                                <li>Kullanıcıyı veritabanına assign edin</li>
                            </ol>
                            
                            <div class="kod-blok">
// DirectAdmin için tipik ayarlar
private static $sunucu = 'localhost';
private static $kullanici = 'kullanici_dbuser';
private static $sifre = 'database_password';
private static $veritabani = 'kullanici_eka_lisans';
                            </div>
                        </div>
                    </div>
                </section>

                <section id="veritabani-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-database me-2"></i>7. Veritabanı Kurulumu</h3>
                        
                        <h5>Otomatik Kurulum (Önerilen):</h5>
                        <ol>
                            <li>Tarayıcıda <code>http://yourdomain.com/kurulum.php</code> adresine gidin</li>
                            <li>Sistem gereksinimlerini kontrol edin</li>
                            <li><strong>"Kurulumu Başlat"</strong> butonuna tıklayın</li>
                            <li>Kurulum tamamlandığında admin bilgilerini not alın</li>
                        </ol>
                        
                        <div class="basarili">
                            <i class="fas fa-check-circle me-2"></i>
                            <strong>Varsayılan Admin Hesabı:</strong><br>
                            E-posta: admin@ekayazilim.com<br>
                            Şifre: admin123
                        </div>
                        
                        <h5>Manuel Kurulum:</h5>
                        <div class="kod-blok">
-- Kullanıcılar tablosu
CREATE TABLE kullanicilar (
    id INT AUTO_INCREMENT PRIMARY KEY,
    ad VARCHAR(100) NOT NULL,
    soyad VARCHAR(100) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    telefon VARCHAR(20),
    sirket VARCHAR(255),
    sifre VARCHAR(255) NOT NULL,
    rol ENUM('admin', 'kullanici') DEFAULT 'kullanici',
    durum ENUM('aktif', 'pasif') DEFAULT 'aktif',
    kayit_tarihi DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Ürünler tablosu
CREATE TABLE urunler (
    id INT AUTO_INCREMENT PRIMARY KEY,
    ad VARCHAR(255) NOT NULL,
    aciklama TEXT,
    versiyon VARCHAR(50),
    fiyat DECIMAL(10,2) DEFAULT 0.00,
    durum ENUM('aktif', 'pasif') DEFAULT 'aktif',
    olusturma_tarihi DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Lisanslar tablosu
CREATE TABLE lisanslar (
    id INT AUTO_INCREMENT PRIMARY KEY,
    lisans_anahtari VARCHAR(255) UNIQUE NOT NULL,
    kullanici_id INT NOT NULL,
    urun_id INT NOT NULL,
    domain VARCHAR(255),
    ip_adresi VARCHAR(45),
    mac_adresi VARCHAR(17),
    baslangic_tarihi DATE NOT NULL,
    bitis_tarihi DATE NOT NULL,
    max_kullanim INT DEFAULT 1,
    kullanim_sayisi INT DEFAULT 0,
    durum ENUM('aktif', 'pasif', 'suresi_dolmus') DEFAULT 'aktif',
    olusturma_tarihi DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (kullanici_id) REFERENCES kullanicilar(id),
    FOREIGN KEY (urun_id) REFERENCES urunler(id)
);
                        </div>
                    </div>
                </section>

                <section id="ssl-kurulum">
                    <div class="adim">
                        <h3><i class="fas fa-lock me-2"></i>8. SSL Sertifikası</h3>
                        
                        <div class="uyari">
                            <i class="fas fa-shield-alt me-2"></i>
                            <strong>Güvenlik:</strong> Lisans sistemi için SSL sertifikası zorunludur!
                        </div>
                        
                        <h5>Let's Encrypt (Ücretsiz):</h5>
                        <ol>
                            <li>Hosting panelinde SSL bölümüne gidin</li>
                            <li>Let's Encrypt seçeneğini aktifleştirin</li>
                            <li>Domain doğrulamasını tamamlayın</li>
                            <li>HTTPS yönlendirmesini aktifleştirin</li>
                        </ol>
                        
                        <h5>.htaccess HTTPS Yönlendirmesi:</h5>
                        <div class="kod-blok">
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
                        </div>
                    </div>
                </section>

                <section id="guvenlik-ayarlari">
                    <div class="adim">
                        <h3><i class="fas fa-shield-alt me-2"></i>9. Güvenlik Ayarları</h3>
                        
                        <h5>Dosya İzinleri:</h5>
                        <div class="kod-blok">
# Klasörler için
chmod 755 /path/to/eka-lisans-sistemi/
chmod 755 /path/to/eka-lisans-sistemi/*/

# PHP dosyaları için
chmod 644 /path/to/eka-lisans-sistemi/*.php
chmod 644 /path/to/eka-lisans-sistemi/*/*.php

# Config dosyası için (özel koruma)
chmod 600 /path/to/eka-lisans-sistemi/config/veritabani.php
                        </div>
                        
                        <h5>.htaccess Güvenlik Kuralları:</h5>
                        <div class="kod-blok">
# Config klasörünü koru
<Files "config/*">
    Order Allow,Deny
    Deny from all
</Files>

# Classes klasörünü koru
<Files "classes/*">
    Order Allow,Deny
    Deny from all
</Files>

# SQL injection koruması
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
    RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
    RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) [OR]
    RewriteCond %{QUERY_STRING} (\<|%3C).*iframe.*(\>|%3E) [NC,OR]
    RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
    RewriteCond %{QUERY_STRING} (<|%3C).*embed.*(>|%3E) [NC]
    RewriteRule ^(.*)$ - [F,L]
</IfModule>
                        </div>
                        
                        <div class="hata">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Önemli:</strong> Kurulum tamamlandıktan sonra <code>kurulum.php</code> dosyasını silin!
                        </div>
                    </div>
                </section>

                <section id="sorun-giderme">
                    <div class="adim">
                        <h3><i class="fas fa-tools me-2"></i>10. Sorun Giderme</h3>
                        
                        <h5>Yaygın Sorunlar ve Çözümleri:</h5>
                        
                        <div class="hosting-panel">
                            <h6><i class="fas fa-exclamation-circle text-danger me-2"></i>"Database connection failed"</h6>
                            <ul>
                                <li>Veritabanı bilgilerini kontrol edin</li>
                                <li>MySQL servisinin çalıştığından emin olun</li>
                                <li>Kullanıcı yetkilerini kontrol edin</li>
                            </ul>
                        </div>
                        
                        <div class="hosting-panel">
                            <h6><i class="fas fa-exclamation-circle text-warning me-2"></i>"PHP extension not found"</h6>
                            <ul>
                                <li>Hosting panelinden PHP eklentilerini aktifleştirin</li>
                                <li>PHP versiyonunu kontrol edin (7.4+)</li>
                                <li>Hosting sağlayıcınızla iletişime geçin</li>
                            </ul>
                        </div>
                        
                        <div class="hosting-panel">
                            <h6><i class="fas fa-exclamation-circle text-info me-2"></i>"Permission denied"</h6>
                            <ul>
                                <li>Dosya izinlerini kontrol edin (755/644)</li>
                                <li>Klasör sahipliğini kontrol edin</li>
                                <li>SELinux ayarlarını kontrol edin</li>
                            </ul>
                        </div>
                        
                        <h5>Log Dosyaları:</h5>
                        <div class="kod-blok">
# Apache error log
tail -f /var/log/apache2/error.log

# PHP error log
tail -f /var/log/php/error.log

# MySQL error log
tail -f /var/log/mysql/error.log
                        </div>
                        
                        <h5>Test Komutları:</h5>
                        <div class="kod-blok">
# PHP versiyonu kontrol
php -v

# PHP eklentileri kontrol
php -m | grep -E "pdo|mysql|json|openssl|curl"

# MySQL bağlantısı test
mysql -u kullanici -p -h localhost veritabani_adi
                        </div>
                    </div>
                </section>

                <div class="basarili">
                    <h4><i class="fas fa-check-circle me-2"></i>Kurulum Tamamlandı!</h4>
                    <p>Kurulum başarıyla tamamlandıktan sonra:</p>
                    <ul>
                        <li>Admin paneline giriş yapın: <code>http://yourdomain.com/panel/</code></li>
                        <li>Varsayılan admin şifresini değiştirin</li>
                        <li>İlk ürününüzü ve lisansınızı oluşturun</li>
                        <li>API entegrasyonunu test edin</li>
                    </ul>
                </div>
                
                <div class="text-center mt-4">
                    <p class="text-muted">
                        <i class="fas fa-code me-2"></i>
                        EKA Yazılım © 2024 - Profesyonel Yazılım Çözümleri
                    </p>
                    <p>
                        <a href="mailto:destek@ekayazilim.com" class="btn btn-outline-primary me-2">
                            <i class="fas fa-envelope me-2"></i>Destek
                        </a>
                        <a href="README.md" class="btn btn-outline-info">
                            <i class="fas fa-book me-2"></i>Dokümantasyon
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Highlight current section in TOC
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section[id]');
            const scrollPos = window.pageYOffset || document.documentElement.scrollTop;
            
            sections.forEach(section => {
                const top = section.offsetTop - 100;
                const bottom = top + section.offsetHeight;
                const id = section.getAttribute('id');
                const link = document.querySelector(`a[href="#${id}"]`);
                
                if (scrollPos >= top && scrollPos < bottom) {
                    document.querySelectorAll('.toc a').forEach(a => a.classList.remove('active'));
                    if (link) link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>